<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>TablaGyan</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://unpkg.com/aos@2.3.4/dist/aos.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Kalam:wght@300;400;700&family=Hubballi&family=Cinzel:wght@600&family=Libre+Baskerville&family=Gwendolyn:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="static/css/index.css" />
    <style>
      /* Custom styles for gallery */
      .event-section h2 {
        font-family: "Cinzel", serif;
        color: #3e2723;
        font-size: 2rem;
        text-transform: capitalize;
        position: relative;
        margin-bottom: 1.5rem;
      }
      .event-section h2::after {
        content: "";
        position: absolute;
        left: 0;
        bottom: -0.5rem;
        width: 4rem;
        height: 3px;
        background-color: #b7410e;
      }
      .image-grid img {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }
      .image-grid img:hover {
        transform: scale(1.05);
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
      }
      @media (max-width: 640px) {
        .event-section h2 {
          font-size: 1.5rem;
        }
        .event-section h2::after {
          width: 3rem;
        }
      }
    </style>
  </head>
  <body class="bg-white text-gray-800">
    <!-- Navigation Bar -->

    <nav
      class="fixed top-0 left-0 w-full z-50 bg-[#FFF8F0] shadow-xl px-6 py-4 flex justify-between items-center border-b-4 border-[#c69b58]"
    >
      <div class="flex items-center space-x-4 md:space-x-6">
        <img
          src="static/images/logo-dark1.png"
          alt="TablaGyan Logo"
          class="w-16 h-16 md:w-24 md:h-24 object-cover rounded-full border-4 border-[#7b1e1e] shadow-lg"
        />
        <div class="flex flex-col">
          <span
            class="text-4xl md:text-5xl text-[#7b1e1e] font-bold leading-none"
            style="font-family: 'Cinzel', serif"
          >
            Tabla<span class="text-[#c69b58]">Gyan</span>
          </span>
          <span
            class="text-xs md:text-sm text-[#3B3B3B] italic font-serif tracking-widest mt-1 ml-6"
            style="font-family: 'Libre Baskerville', serif"
          >
            Academy of Music
          </span>
        </div>
      </div>

      <div
        class="hidden md:flex space-x-8 text-[1rem] font-medium relative"
        style="font-family: 'Libre Baskerville', serif"
      >
        <a
          href="index.html"
          class="text-[#3B3B3B] hover:text-[#7b1e1e] transition-colors duration-300"
          >Home</a
        >

        <div class="relative group">
          <a
            href="about.html"
            class="text-[#3B3B3B] hover:text-[#7b1e1e] transition-colors duration-300"
            >Academy</a
          >
          <div
            class="absolute left-1/2 -translate-x-1/2 mt-3 w-52 bg-white border border-[#c69b58]/50 shadow-xl rounded-lg hidden group-hover:block transition-all duration-300 overflow-hidden z-50"
          >
            <a
              href="about.html#academy"
              class="block px-4 py-3 text-[#3B3B3B] hover:bg-[#c69b58]/20 hover:text-[#7b1e1e] transition-colors"
              >Our Philosophy</a
            >
            <a
              href="about.html#gurus"
              class="block px-4 py-3 text-[#3B3B3B] hover:bg-[#c69b58]/20 hover:text-[#7b1e1e] transition-colors"
              >Our Gurus</a
            >
          </div>
        </div>

        <a
          href="courses.html"
          class="text-[#3B3B3B] hover:text-[#7b1e1e] transition-colors duration-300"
          >Courses</a
        >
        <a
          href="gallery.html"
          class="text-[#3B3B3B] hover:text-[#7b1e1e] transition-colors duration-300"
          >Gallery</a
        >
        <a
          href="contact.html"
          class="text-[#3B3B3B] hover:text-[#7b1e1e] transition-colors duration-300"
          >Contact</a
        >
      </div>

      <input type="checkbox" id="menu-toggle" class="hidden" />

      <label
        for="menu-toggle"
        class="md:hidden p-2 text-[#7b1e1e] cursor-pointer hover:text-[#c69b58]"
      >
        <svg
          class="w-7 h-7"
          fill="none"
          stroke="currentColor"
          viewBox="0 0 24 24"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M4 6h16M4 12h16M4 18h16"
          ></path>
        </svg>
      </label>

      <div
        class="absolute top-full left-0 right-0 bg-[#FFF8F0] shadow-2xl transition-all duration-500 max-h-0 overflow-hidden"
        id="menu-content"
      >
        <div
          class="flex flex-col space-y-2 p-4 text-lg text-[#3B3B3B]"
          style="font-family: 'Libre Baskerville', serif"
        >
          <a
            href="index.html"
            class="hover:text-[#7b1e1e] py-2 border-b border-[#c69b58]/30"
            >Home</a
          >
          <a
            href="about.html"
            class="hover:text-[#7b1e1e] py-2 border-b border-[#c69b58]/30"
            >TablaGyan Academy</a
          >
          <a
            href="about.html#gurus"
            class="hover:text-[#7b1e1e] py-2 border-b border-[#c69b58]/30 pl-6 text-sm"
            >— Gurus</a
          >
          <a
            href="courses.html"
            class="hover:text-[#7b1e1e] py-2 border-b border-[#c69b58]/30"
            >Courses</a
          >
          <a
            href="gallery.html"
            class="hover:text-[#7b1e1e] py-2 border-b border-[#c69b58]/30"
            >Gallery</a
          >
          <a
            href="contact.html"
            class="hover:text-[#7b1e1e] py-2 border-b border-[#c69b58]/30"
            >Contact</a
          >
        </div>
      </div>
    </nav>

    <style>
      /* This CSS is essential to target the dropdown content */
      #menu-toggle:checked ~ #menu-content {
        max-height: 400px; /* Adjust height based on content */
        border-top: 2px solid #c69b58;
      }
    </style>
    <div
      id="pageWrapper"
      class="transition-transform duration-500 ease-in-out font-sans bg-[#fdf6e3]"
    >
      <audio
        id="background-music"
        src="/static/audio/tabla-bg.mp3"
        loop
      ></audio>
      <!-- Music Toggle Icon -->
      <div id="music-toggle" class="fixed top-40 right-5 z-50 cursor-pointer">
        <img
          id="music-icon"
          src="/static/volume-up.png"
          alt="Music Toggle"
          class="w-8 h-8"
        />
      </div>
      <section class="gallery py-8 pt-40 px-4 sm:px-6 lg:px-8">
        <!-- Dynamic content will be inserted here -->
      </section>
    </div>
    <div class="visitor-counter">
      <img
        src="https://hits.sh/cksachdev.github.io/tablagyan.svg?style=flat-square&label=Site%20Visitors&color=e1c699&labelColor=6e2e1a"
        alt="Visitor Count"
      />
    </div>
    <!-- cta Footer -->
    <div class="relative">
      <section
        class="pt-20 pb-24 bg-[#7b1e1e] relative font-serif overflow-hidden border-t-4 border-[#c69b58]"
      >
        <div
          class="absolute inset-0 opacity-10 pointer-events-none"
          style="
            background-image: radial-gradient(#c69b58 1px, transparent 1px);
            background-size: 30px 30px;
          "
        ></div>

        <div class="container mx-auto px-6 md:px-12 relative z-10">
          <div
            class="flex flex-col md:flex-row items-center justify-between gap-10"
          >
            <div class="text-center md:text-left md:max-w-2xl">
              <h3
                class="text-3xl md:text-4xl font-bold text-white mb-4"
                style="font-family: 'Cinzel', serif"
              >
                Ready to Find Your <span class="text-[#c69b58]">Rhythm?</span>
              </h3>
              <p
                class="text-[#FFF8F0]/80 text-lg leading-relaxed font-light"
                style="font-family: 'Hubballi', sans-serif"
              >
                Join our legacy of tradition and excellence. Let rhythm and
                melody transform your life today.
              </p>
            </div>

            <div class="flex-shrink-0">
              <a
                href="contact.html"
                class="group relative inline-flex items-center justify-center px-10 py-4 bg-[#c69b58] text-[#7b1e1e] font-bold text-sm tracking-[0.2em] uppercase rounded-full overflow-hidden transition-all duration-300 hover:bg-white hover:shadow-[0_0_20px_rgba(198,155,88,0.6)]"
              >
                <span class="relative flex items-center">
                  Enroll Now
                  <svg
                    class="w-5 h-5 ml-3 transform group-hover:translate-x-1 transition-transform"
                    fill="none"
                    stroke="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      stroke-linecap="round"
                      stroke-linejoin="round"
                      stroke-width="2"
                      d="M17 8l4 4m0 0l-4 4m4-4H3"
                    ></path>
                  </svg>
                </span>
              </a>
            </div>
          </div>
        </div>
      </section>

      <div class="relative z-30">
        <div class="h-2 w-full bg-[#c69b58]"></div>

        <div
          class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"
        >
          <div class="relative z-30">
            <div class="h-2 w-full bg-[#c69b58]"></div>

            <div
              class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"
            >
              <div class="relative z-30">
                <div class="h-2 w-full bg-[#c69b58]"></div>

                <div
                  class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"
                >
                  <div class="relative z-30">
                    <div class="h-2 w-full bg-[#c69b58]"></div>

                    <div
                      class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2"
                    >
                      <div
                        class="w-20 h-20 bg-[#c69b58] rounded-full flex items-center justify-center shadow-xl ring-4 ring-[#fcf0dc]"
                      >
                        <img
                          src="/static/images/tabla.png"
                          alt="Tabla drums icon"
                          class="w-12 h-12 object-contain"
                        />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <footer
        class="bg-[#fcf0dc] text-[#4b2e2e] pt-16 pb-10 font-serif relative border-t-4 border-[#c69b58]"
      >
        <div
          class="absolute top-0 left-0 w-full h-full opacity-5 pointer-events-none"
          style="
            background-image: radial-gradient(#7b1e1e 1px, transparent 1px);
            background-size: 20px 20px;
          "
        ></div>

        <div class="container mx-auto px-6 md:px-12 relative z-10">
          <div
            class="grid grid-cols-1 lg:grid-cols-[43%_27%_30%] gap-8 mb-12 border-b border-[#7b1e1e]/10 pb-12"
          >
            <div class="space-y-6 pr-0 lg:pr-16">
              <div class="flex items-center gap-3">
                <h2
                  class="text-3xl font-bold text-[#7b1e1e]"
                  style="font-family: 'Cinzel', serif"
                >
                  Tabla<span class="text-[#c69b58]">Gyan</span>
                </h2>
              </div>

              <p
                class="text-sm leading-relaxed text-[#5a4a42]"
                style="font-family: 'Hubballi', sans-serif"
              >
                A sanctuary for rhythm seekers. Preserving the ancient tradition
                of Indian Classical Music while inspiring the next generation of
                artists.
              </p>

              <div class="flex space-x-4 pt-2">
                <a
                  href="https://instagram.com/tablagyan.official"
                  target="_blank"
                  class="w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300 group text-white bg-gradient-to-tr from-[#f09433] via-[#dc2743] to-[#bc1888] hover:from-[#7b1e1e] hover:via-[#7b1e1e] hover:to-[#7b1e1e] shadow-md hover:shadow-none"
                >
                  <svg
                    class="w-5 h-5 group-hover:scale-110 transition-transform"
                    fill="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M7.75 2A5.75 5.75 0 002 7.75v8.5A5.75 5.75 0 007.75 22h8.5A5.75 5.75 0 0022 16.25v-8.5A5.75 5.75 0 0016.25 2h-8.5zM12 8.5a3.5 3.5 0 110 7 3.5 3.5 0 010-7zm0 1.5a2 2 0 100 4 2 2 0 000-4zm4.75-.75a.75.75 0 110 1.5.75.75 0 010-1.5zM4.5 7.75A3.25 3.25 0 017.75 4.5h8.5A3.25 3.25 0 0119.5 7.75v8.5a3.25 3.25 0 01-3.25 3.25h-8.5A3.25 3.25 0 014.5 16.25v-8.5z"
                    />
                  </svg>
                </a>

                <a
                  href="https://youtube.com/@tablagyanacademyofmusic"
                  target="_blank"
                  class="w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300 group text-white bg-[#FF0000] hover:bg-[#7b1e1e] shadow-md hover:shadow-none"
                >
                  <svg
                    class="w-5 h-5 group-hover:scale-110 transition-transform"
                    fill="currentColor"
                    viewBox="0 0 576 512"
                  >
                    <path
                      d="M549.655 124.083c-6.281-23.65-24.774-42.181-48.2-48.483C460.018 64 288 64 288 64S115.982 64 74.545 75.6c-23.426 6.302-41.919 24.833-48.2 48.483C16 165.138 16 256 16 256s0 90.862 10.345 131.917c6.281 23.65 24.774 42.181 48.2 48.483C115.982 448 288 448 288 448s172.018 0 213.455-11.6c23.426-6.302 41.919-24.833 48.2-48.483C560 346.862 560 256 560 256s0-90.862-10.345-131.917zM232 336V176l142.857 80L232 336z"
                    />
                  </svg>
                </a>

                <a
                  href="https://facebook.com/tabla.gyan"
                  target="_blank"
                  class="w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300 group text-white bg-[#1877F2] hover:bg-[#7b1e1e] shadow-md hover:shadow-none"
                >
                  <svg
                    class="w-5 h-5 group-hover:scale-110 transition-transform"
                    fill="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M22 12.06C22 6.48 17.52 2 12 2S2 6.48 2 12.06c0 5.01 3.66 9.16 8.44 9.88v-6.99H8.09v-2.89h2.35v-2.2c0-2.33 1.39-3.61 3.52-3.61 1.02 0 2.09.18 2.09.18v2.3h-1.18c-1.16 0-1.52.72-1.52 1.45v1.88h2.58l-.41 2.89h-2.17v6.99C18.34 21.22 22 17.07 22 12.06z"
                    />
                  </svg>
                </a>

                <a
                  href="https://wa.me/919845395205"
                  target="_blank"
                  class="w-10 h-10 rounded-full flex items-center justify-center transition-all duration-300 group text-white bg-[#25D366] hover:bg-[#7b1e1e] shadow-md hover:shadow-none"
                >
                  <svg
                    class="w-5 h-5 group-hover:scale-110 transition-transform"
                    fill="currentColor"
                    viewBox="0 0 24 24"
                  >
                    <path
                      d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"
                    />
                  </svg>
                </a>
              </div>
            </div>

            <div class="lg:pl-8">
              <h3
                class="text-sm font-bold text-[#7b1e1e] uppercase tracking-widest mb-6 border-b border-[#c69b58] pb-2 inline-block"
              >
                Explore
              </h3>
              <ul class="space-y-3 text-sm font-medium text-[#5a4a42]">
                <li>
                  <a
                    href="about.html"
                    class="hover:text-[#7b1e1e] hover:translate-x-1 transition-all flex items-center group"
                    ><span
                      class="w-1.5 h-1.5 bg-[#c69b58] rounded-full mr-3 group-hover:bg-[#7b1e1e]"
                    ></span>
                    About Us</a
                  >
                </li>
                <li>
                  <a
                    href="courses.html"
                    class="hover:text-[#7b1e1e] hover:translate-x-1 transition-all flex items-center group"
                    ><span
                      class="w-1.5 h-1.5 bg-[#c69b58] rounded-full mr-3 group-hover:bg-[#7b1e1e]"
                    ></span>
                    Courses</a
                  >
                </li>
                <li>
                  <a
                    href="about.html#gurus"
                    class="hover:text-[#7b1e1e] hover:translate-x-1 transition-all flex items-center group"
                    ><span
                      class="w-1.5 h-1.5 bg-[#c69b58] rounded-full mr-3 group-hover:bg-[#7b1e1e]"
                    ></span>
                    Our Guru</a
                  >
                </li>
                <li>
                  <a
                    href="gallery.html"
                    class="hover:text-[#7b1e1e] hover:translate-x-1 transition-all flex items-center group"
                    ><span
                      class="w-1.5 h-1.5 bg-[#c69b58] rounded-full mr-3 group-hover:bg-[#7b1e1e]"
                    ></span>
                    Gallery</a
                  >
                </li>
                <li>
                  <a
                    href="contact.html"
                    class="hover:text-[#7b1e1e] hover:translate-x-1 transition-all flex items-center group"
                    ><span
                      class="w-1.5 h-1.5 bg-[#c69b58] rounded-full mr-3 group-hover:bg-[#7b1e1e]"
                    ></span>
                    Enrollment</a
                  >
                </li>
              </ul>
            </div>

            <div>
              <h3
                class="text-sm font-bold text-[#7b1e1e] uppercase tracking-widest mb-6 border-b border-[#c69b58] pb-2 inline-block"
              >
                Visit Us
              </h3>
              <ul class="space-y-4 text-sm font-medium text-[#5a4a42]">
                <li class="flex items-start group">
                  <div
                    class="w-8 h-8 rounded-full bg-[#FFF8F0] border border-[#c69b58] flex items-center justify-center flex-shrink-0 mr-4 mt-1 group-hover:bg-[#7b1e1e] group-hover:text-white transition-colors"
                  >
                    <svg
                      class="w-4 h-4"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"
                      ></path>
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"
                      ></path>
                    </svg>
                  </div>
                  <span
                    >1234 Music Lane, Bengaluru,<br />Karnataka 560034,
                    India</span
                  >
                </li>
                <li class="flex items-center group">
                  <div
                    class="w-8 h-8 rounded-full bg-[#FFF8F0] border border-[#c69b58] flex items-center justify-center flex-shrink-0 mr-4 group-hover:bg-[#7b1e1e] group-hover:text-white transition-colors"
                  >
                    <svg
                      class="w-4 h-4"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
                      ></path>
                    </svg>
                  </div>
                  <span>+91 98453 95205</span>
                </li>
                <li class="flex items-center group">
                  <div
                    class="w-8 h-8 rounded-full bg-[#FFF8F0] border border-[#c69b58] flex items-center justify-center flex-shrink-0 mr-4 group-hover:bg-[#7b1e1e] group-hover:text-white transition-colors"
                  >
                    <svg
                      class="w-4 h-4"
                      fill="none"
                      stroke="currentColor"
                      viewBox="0 0 24 24"
                    >
                      <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        stroke-width="2"
                        d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                      ></path>
                    </svg>
                  </div>
                  <span>contact@tablagyan.com</span>
                </li>
              </ul>
            </div>
          </div>

          <div
            class="text-center text-xs text-[#5a4a42]/60 flex flex-col md:flex-row justify-between items-center gap-4"
          >
            <p>&copy; 2025 TablaGyan Academy. All rights reserved.</p>
            <div class="flex gap-4">
              <a href="#" class="hover:text-[#7b1e1e]">Privacy Policy</a>
              <span class="text-[#c69b58]">•</span>
              <a href="#" class="hover:text-[#7b1e1e]">Terms of Service</a>
            </div>
          </div>
        </div>
      </footer>
    </div>
    <script src="https://unpkg.com/aos@2.3.4/dist/aos.js"></script>
    <script>
      AOS.init();
    </script>
    <script src="index.js"></script>
    <script>
      // GitHub repository details
      const owner = "cksachdev";
      const repo = "tablagyan";
      const galleryPath = "gallery/";
      const imageExtensions = [".jpg", ".jpeg", ".png"];

      // Function to check if a file is an image
      function isImageFile(fileName) {
        return imageExtensions.some((ext) =>
          fileName.toLowerCase().endsWith(ext)
        );
      }

      // Function to fetch directory contents
      async function fetchDirectoryContents(path) {
        const url = `https://api.github.com/repos/${owner}/${repo}/contents/${path}`;
        try {
          const response = await fetch(url, {
            headers: {
              Accept: "application/vnd.github.v3+json",
            },
          });
          if (!response.ok) {
            throw new Error(`GitHub API error: ${response.status}`);
          }
          return await response.json();
        } catch (error) {
          console.error(`Error fetching ${path}:`, error);
          return [];
        }
      }

      // Function to load images into a specific grid container
      async function loadImagesForFolder(
        folderName,
        gridContainer,
        loadingSpinner
      ) {
        // Fetch images in the folder
        const files = await fetchDirectoryContents(
          `${galleryPath}${folderName}`
        );
        const images = files.filter(
          (file) => file.type === "file" && isImageFile(file.name)
        );

        // Remove loading spinner
        if (loadingSpinner) loadingSpinner.remove();

        if (images.length === 0) {
          gridContainer.innerHTML = `<p class="text-center text-[#5a4a42] py-4 italic">No images found in this folder.</p>`;
          return;
        }

        // Add images to the grid
        images.forEach((image) => {
          const imgContainer = document.createElement("div");
          imgContainer.className =
            "relative overflow-hidden rounded-lg shadow-md border border-[#c69b58]/20 group";

          const imgElement = document.createElement("img");
          imgElement.src = image.download_url; // GitHub API provides direct download_url
          imgElement.alt = `${folderName} image`;
          imgElement.className =
            "w-full h-64 object-cover rounded-lg transition-transform duration-500 group-hover:scale-110";
          imgElement.loading = "lazy";

          // Optional: Add AOS only if newly loaded
          imgElement.setAttribute("data-aos", "fade-up");

          imgContainer.appendChild(imgElement);
          gridContainer.appendChild(imgContainer);
        });

        // Mark as loaded so we don't fetch again
        gridContainer.setAttribute("data-loaded", "true");
      }

      // Function to create gallery sections
      async function createGallery() {
        const gallerySection = document.querySelector(".gallery");
        gallerySection.innerHTML = ""; // Clear any existing content

        // 1. Fetch top-level folders in gallery/
        const folders = await fetchDirectoryContents(galleryPath);
        const eventFolders = folders
          .filter((item) => item.type === "dir")
          .map((item) => item.name);

        if (eventFolders.length === 0) {
          gallerySection.innerHTML =
            '<p class="text-center text-[#5a4a42] font-serif italic">No event folders found in the gallery.</p>';
          return;
        }

        // 2. Create Accordion for each folder
        for (const folder of eventFolders) {
          // Container
          const eventWrapper = document.createElement("div");
          eventWrapper.className =
            "mb-6 border border-[#c69b58]/30 rounded-xl bg-white overflow-hidden shadow-sm";

          // Header (Button)
          const headerBtn = document.createElement("button");
          headerBtn.className =
            "w-full flex items-center justify-between p-6 text-left bg-[#FFF8F0] hover:bg-[#fcefd7] transition-colors duration-300 focus:outline-none";

          // Format Title: "my_event_name" -> "My Event Name"
          const formattedTitle = folder
            .replace(/([A-Z])/g, " $1")
            .replace(/_/g, " ")
            .trim();

          // Header Content
          headerBtn.innerHTML = `
        <span class="text-xl md:text-2xl font-bold text-[#7b1e1e]" style="font-family: 'Cinzel', serif">
          ${formattedTitle}
        </span>
        <div class="w-10 h-10 rounded-full border border-[#c69b58] flex items-center justify-center text-[#7b1e1e] transition-transform duration-300 transform rotate-0 icon-arrow">
           <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
        </div>
      `;

          // Image Grid Container (Hidden by default)
          const imageGrid = document.createElement("div");
          imageGrid.className =
            "hidden grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 p-6 bg-white";
          imageGrid.setAttribute("data-loaded", "false"); // Track if images are fetched

          // Loading Text (Shows before images load)
          const loadingSpinner = document.createElement("div");
          loadingSpinner.className =
            "text-center py-8 text-[#c69b58] italic font-serif";
          loadingSpinner.innerHTML = "Loading memories...";
          imageGrid.appendChild(loadingSpinner);

          // Click Event
          headerBtn.addEventListener("click", () => {
            const icon = headerBtn.querySelector(".icon-arrow");

            // Toggle Visibility
            if (imageGrid.classList.contains("hidden")) {
              // OPEN
              imageGrid.classList.remove("hidden");
              icon.classList.add("rotate-180", "bg-[#7b1e1e]", "text-white"); // Rotate Arrow & Change color

              // Fetch images ONLY if not loaded yet
              if (imageGrid.getAttribute("data-loaded") === "false") {
                loadImagesForFolder(folder, imageGrid, loadingSpinner);
              }
            } else {
              // CLOSE
              imageGrid.classList.add("hidden");
              icon.classList.remove("rotate-180", "bg-[#7b1e1e]", "text-white");
            }
          });

          eventWrapper.appendChild(headerBtn);
          eventWrapper.appendChild(imageGrid);
          gallerySection.appendChild(eventWrapper);
        }
      }

      // Run the gallery creation on page load
      window.onload = createGallery;

      // Mobile menu toggle logic (Existing)
      const menuToggle = document.getElementById("menu-toggle");
      if (menuToggle) {
        menuToggle.addEventListener("change", function () {
          const menuContent = document.getElementById("menu-content");
          if (this.checked) {
            menuContent.classList.remove("max-h-0");
            menuContent.classList.add("max-h-screen");
          } else {
            menuContent.classList.add("max-h-0");
            menuContent.classList.remove("max-h-screen");
          }
        });
      }
    </script>
  </body>
</html>
